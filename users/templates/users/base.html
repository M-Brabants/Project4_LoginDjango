{% load static tailwind_tags %}
<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Tailwind CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.2/flowbite.min.css" rel="stylesheet" />
    {% tailwind_css %}

    <!--Font awesome icons -->
	  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">


      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>

    <!-- A plugin for password show/hide  -->
    <script src="https://unpkg.com/bootstrap-show-password@1.2.1/dist/bootstrap-show-password.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.2/flowbite.min.js"></script>
    <script src="https://ferrevanhoof.eu.qlikcloud.com/resources/assets/external/requirejs/require.js"></script>

    {% block head %}
    {% endblock %}

    <title>{% block title %} {% endblock %} </title>
</head>
<body>
  <!-- NAVBAR -->
  {% if "/logout/" not in request.path and "/login/" not in request.path and "/register/" not in request.path and "/password-reset/" not in request.path %}
  <nav class="bg-darker-800 sm:px-4 py-2.5 w-screen fixed top-0 left-0 z-50">
    <div class="container flex flex-wrap items-center justify-between mx-auto">
      <div class="flex items-center ml-4 text-sm font-medium">
        {% if user.is_authenticated %}
        <a href="/">
          <img src="./../../../media/assets/logo_light_color.png" class="h-4 mr-6 hover:brightness-200 hover:saturate-0" alt="Logo" />
        </a>
        <a href="/" class="block ml-6 py-2 text-gray-200 hover:text-primary-light">
          Home
        </a>
        {% else %}
        <img src="./../../../media/assets/logo_light_color.png" class="h-4 mr-6" alt="Logo" />
        <p class="text-gray-300 font-light">-</p>
        <p class="block ml-6 py-2  text-gray-300">Energy Monitoring</p>
        {% endif %}
      </div>

      {% if request.path == "/" %}
      <div>
        <ul class="mr-4 flex flex-col md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium">
          <li class="w-20 text-center pt-1 text-primary-light hover:text-primary-light text-sm" id="setDay">
              Day
          </li>
          <li class="w-20 mx-4 text-center pt-1 text-gray-200 hover:text-primary-light text-sm hover:cursor-pointer" id="setWeek">
              Week
          </li>
          <li class="w-20 text-center pt-1 text-gray-200 hover:text-primary-light text-sm hover:cursor-pointer" id="setMonth">
              Month
          </li>
        </ul>
      </div>
      {% endif %}

      <div class="flex items-center">
        <div class="w-full md:block md:w-auto" id="navbar-default">


          <ul class="mr-4 flex flex-col md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium">
            {% if user.is_authenticated %}
            <li>
              <button id="dropdownNavbarButton" data-dropdown-toggle="dropdownNavbar" class="flex items-center text-sm font-medium text-gray-300 rounded-full hover:text-primary-light md:mr-0" type="button">
                <span class="sr-only">Open user menu</span>
                <!-- {% if user.profile.avatar.url %}<img class="w-8 h-8 mr-4 rounded-full" src="{{ user.profile.avatar.url }}" alt="user photo"> {% endif %} -->
                {{user.first_name|default:'Guest'}} {{user.last_name}}
                <svg class="w-4 h-4 mx-1.5" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
              </button>
              <div id="dropdownNavbar"
                class=" z-10 hidden font-normal bg-darker-800 divide-y divide-darker-900 rounded-b-lg w-44 shadow-2xl shadow-darker-800/30">
                <div class="py-1">
                  <a href="/" class="block px-4 py-2 text-sm font-semibold text-gray-200 hover:text-primary-light"><i class="fas fa-home mr-2"></i>Home</a>
                </div>
                <ul class="py-1 text-sm" aria-labelledby="dropdownLargeButton">
                  <li>
                    <a href="{% url 'users-profile' %}" class="block px-4 py-2 text-gray-200 hover:text-primary-light"><i class="fas fa-pen mr-2"></i>Edit Profile</a>
                  </li>
                  <li>
                    <a href="{% url 'password_change' %}" class="block px-4 py-2 text-gray-200 hover:text-primary-light"><i class="fas fa-key mr-2"></i>Change Password</a>
                  </li>
                  <li>
                    <a href="{% url 'users-help' %}" class="block px-4 py-2 text-gray-200 hover:text-primary-light"><i class="fas fa-question mr-2"></i>Help</a>
                  </li>
                </ul>
                <div class="py-1">
                  <a href="{% url 'logout' %}" id="logoutButton" class="block px-4 py-2 text-sm text-gray-200 hover:text-primary-light"><i class="fas fa-sign-out-alt mr-2"></i>Sign out</a>
                </div>
              </div>
            </li>
            {% else %}

            <li>
              <a href="{% url 'login' %}" class="block px-4 py-2 text-gray-200 hover:text-primary-light"><i class="fas fa-chevron-right mr-2"></i>Login</a>
            </li>
            <li>
              <a href="{% url 'users-register' %}" class="block px-4 py-2 text-gray-200 hover:text-primary-light"><i class="fas fa-chevron-right mr-2"></i>Register</a>
            </li>

            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </nav>
  {% endif %}

  <!-- MAIN -->
  <div class="container mx-auto mt-8">
    <!--Any flash messages pop up in any page because this is the base template-->
    {% if messages %}

    <div class="">
      {% for message in messages %}
      {% if message.tags == 'success' %}
      <div class="w-11/12 lg:w-6/12 fixed top-20 inset-x-0 mx-auto">
        <div id="alert-3" class="flex p-4 mb-4 text-success-200 bg-success-100 rounded-lg" role="alert">
          <svg aria-hidden="true" class="flex-shrink-0 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
          <span class="sr-only">Info</span>
          <div class="ml-3 text-sm font-medium">{{ message }}</div>
          <button type="button" class="ml-auto -mx-1.5 -my-1.5 bg-success-100 text-success-200 rounded-lg hover:bg-success-100 inline-flex h-8 w-8" data-dismiss-target="#alert-3" aria-label="Close">
        
            <span class="sr-only">Close</span>
            <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
          </button>
        </div>
      </div>
      {% endif %}
      {% if message.tags == 'warning' %}
      <div class="w-11/12 lg:w-6/12 fixed top-20 inset-x-0 mx-auto">
        <div id="alert-3" class="flex p-4 mb-4 text-warning-200 bg-warning-100 rounded-lg" role="alert">
          <svg aria-hidden="true" class="flex-shrink-0 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
          <span class="sr-only">Info</span>
          <div class="ml-3 text-sm font-medium">{{ message }}</div>
          <button type="button" class="ml-auto -mx-1.5 -my-1.5 bg-warning-100 text-warning-200 rounded-lg hover:bg-warning-100 inline-flex h-8 w-8" data-dismiss-target="#alert-3" aria-label="Close">
        
            <span class="sr-only">Close</span>
            <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
          </button>
        </div>
      </div>
      {% endif %}
      {% if message.tags == 'error' %}
      <div class="w-11/12 lg:w-6/12 fixed top-20 inset-x-0 mx-auto">
        <div id="alert-3" class="flex p-4 mb-4 text-error-200 bg-error-100 rounded-lg" role="alert">
          <svg aria-hidden="true" class="flex-shrink-0 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
          <span class="sr-only">Info</span>
          <div class="ml-3 text-sm font-medium">{{ message }}</div>
          <button type="button" class="ml-auto -mx-1.5 -my-1.5 bg-error-100 text-error-200 rounded-lg hover:bg-error-100 inline-flex h-8 w-8" data-dismiss-target="#alert-3" aria-label="Close">
        
            <span class="sr-only">Close</span>
            <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
          </button>
        </div>
      </div>
      {% endif %}
      {% endfor %}
    </div>

    {% endif %}
    {% block content %}{% endblock %}
    {% block script %}{% endblock %}

    <!-- SCRIPT -->
    <script>
      // REMOVE SELECTION QLIK ON LOGOUT
      $('#logoutButton').click(() => {
        console.log('Logged out, Goodbye!')
        //TODO: Code Ferre
        
      });
    </script>

  </div>


</body>
</html>